<section class="w-full min-h-[100vh] flex justify-center pt-5 pb-7">
    <section class="w-[96%]">

        <!-- section-1 -->
        <div class="w-full md:grid md:grid-cols-2 md:flex md:justify-between md:items-center md:mb-5">
            <div class="flex items-center">
                <button routerLink="/home"
                    class="p-2 text-[12px] md:text-[16px] text-[white] cursor-pointer rounded-[8px] bg-[#6777EF] shadow-xl flex items-center">
                    <mat-icon class="me-1">keyboard_backspace</mat-icon>
                    Go back
                </button>
                <h1 class="md:text-[1.3rem] text-[#767676] ms-3">Employee Attendance</h1>
            </div>

            <div class="flex md:justify-end text-[#767676] opacity-0 md:opacity-100">
                <mat-icon>home</mat-icon>
                <mat-icon>chevron_right</mat-icon>
                <span class="ps-2">Attendance</span>
                <mat-icon>chevron_right</mat-icon>
                <span class="ps-2">Employee Attendance</span>
            </div>
        </div>

        <!-- section-2 -->
        <section class="w-full h-auto bg-white p-3 md:p-6 rounded-xl shadow-xl">

            <!-- Header Section -->
            <div class="w-full h-auto flex flex-col md:flex-row justify-between items-start md:items-center mb-5">
                <h2 class="text-[#5B626B] text-lg mb-2 md:mb-0">Employee Attendance</h2>

                <div class="flex items-center gap-10">
                    <div
                        class="flex items-center text-[#6777EF] text-[18px] font-semibold bg-[#DAE1F3] p-1.5 px-2 rounded-md">
                        <mat-icon class="mr-1" style="color: #6777EF;">timer</mat-icon>
                        {{ timerDisplay }}
                    </div>

                    <button (click)="toggleAttendance()"
                        [ngClass]="{'bg-green-600 hover:bg-green-700' : !isCheckedIn, 'bg-red-600 hover:bg-red-700' : isCheckedIn }"
                        class="p-1.5 text-white bg-[#6777EF] rounded-lg shadow hover:bg-[#5564c3] transition-all cursor-pointer flex justify-center gap-1">
                        <mat-icon>{{ isCheckedIn ? 'not_interested' : 'check_circle_outline' }}</mat-icon>
                        {{ isCheckedIn ? ' Check Out' : ' Check In' }}
                    </button>

                </div>
            </div>

            <!-- Filter Bar -->
            <div
                class="w-full h-auto bg-[#DAE1F3] p-5 md:flex-row md:items-center flex flex-col items-start rounded-tl-xl rounded-tr-xl mb-3">
                <h1 class="text-[1.2rem] text-[gray]">Estimate</h1>

                <div
                    class="md:ms-5 mt-3 md:mt-0 bg-[white] rounded-[10px] flex justify-center items-center text-[gray]">
                    <mat-icon class="ms-1">search</mat-icon>
                    <input type="text" class="w-[200px] h-[40px] rounded-[10px] ps-2" placeholder="Search here..."
                        [(ngModel)]="searchText" style="outline-width: 0px;">
                </div>

            </div>



            <!-- Table -->
            <!-- Table Section -->
            <div class="w-full h-auto overflow-x-auto">

                <!--  Show message if no records at all -->
                <div *ngIf="attendanceRecords.length === 0" class="w-full p-2 flex justify-center">
                    No employee attendance data available! ðŸ˜ž
                </div>

                <!-- Show message if search has no match -->
                <div *ngIf="attendanceRecords.length > 0 && filteredRecords.length === 0"
                    class="w-full p-2 flex justify-center">
                    No matching employee found! ðŸ˜ž
                </div>

                <!-- âœ… Table only visible when data exists -->
                <table *ngIf="filteredRecords.length > 0" mat-table [dataSource]="filteredRecords"
                    class="mat-elevation-z8 w-full">

                    <!-- Columns -->

                    <ng-container matColumnDef="employeeId">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Employee ID</th>
                        <td mat-cell *matCellDef="let element" class="text-center">{{ element.employeeId }}</td>
                    </ng-container>

                    <ng-container matColumnDef="employeename">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Employee Name</th>
                        <td mat-cell *matCellDef="let element" class="text-center text-[#6777EF]">
                            {{ element.employeename }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Date</th>
                        <td mat-cell *matCellDef="let element" class="text-center">{{ element.date }}</td>
                    </ng-container>

                    <ng-container matColumnDef="checkInTime">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Check-In</th>
                        <td mat-cell *matCellDef="let element" class="text-center text-green-600">
                            {{ element.checkInTime }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="checkOutTime">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Check-Out</th>
                        <td mat-cell *matCellDef="let element" class="text-center text-red-500">
                            {{ element.checkOutTime || '-' }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="totalWorkingHours">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Working Hours</th>
                        <td mat-cell *matCellDef="let element" class="text-center text-orange-500">
                            {{ element.totalWorkingHours || '-' }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Action</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                            <button (click)="onDelete(element.id)"
                                class="w-[35px] h-[35px] rounded-full hover:bg-[#dddddd] cursor-pointer">
                                <mat-icon style="color: #F05206">delete_forever</mat-icon>
                            </button>
                        </td>
                    </ng-container>

                    <!-- Table rows -->
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="{
                     'text-green-600 font-semibold': !row.checkOutTime,
                     'text-red-600': row.checkOutTime
                     }" class="border-b border-dashed cursor-pointer">
                    </tr>

                </table>
            </div>

        </section>

    </section>

</section>